<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#111827" />
    <meta name="description" content="M0B1Li7Y: a fast, offline-capable 12-minute mobility routine." />
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="icon" href="./icons/icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="./icons/icon.svg" />
    <link rel="stylesheet" href="./styles.css" />
    <title>M0B1Li7Y</title>
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header app-header--compact">
        <div class="brand">
          <div class="logo">üü†</div>
          <div class="title-wrap">
            <h1>M0B1Li7Y</h1>
            <small class="tagline">12-minute mobility</small>
          </div>
        </div>
        <div class="header-actions">
          <button id="mute-toggle" class="icon-btn" aria-label="Toggle sound">üîä</button>
        </div>
      </header>

      <div id="update-banner" class="update-banner" hidden aria-live="polite">
        <span>New version available</span>
        <div class="update-actions">
          <button id="reload-btn" class="control-btn emphasized">Reload</button>
          <button id="dismiss-update" class="control-btn">Later</button>
        </div>
      </div>

      <main>
        <section id="routine-view" class="view active" aria-label="Routine">
          <div class="hero">
            <div class="media-frame media-frame--large" id="media-frame">
              <img id="step-image" alt="" loading="lazy" />
              <div id="image-fallback" class="image-fallback" hidden aria-hidden="true"></div>
            </div>

            <div class="hero-overlay">
              <div class="hero-meta">
                <p class="step-progress" id="step-progress">Step 1 of 12</p>
                <h3 id="step-name">Arm circles</h3>
                <p id="step-cue" class="step-cue">Keep shoulders relaxed and smooth.</p>
              </div>
              <div class="hero-controls">
                <div class="timer hero-timer" id="timer">00:30</div>
                <div id="untimed-hint" class="untimed-hint" hidden>Untimed set ‚Äî tap Done when finished.</div>
              </div>
            </div>
          </div>

          <div class="bottom-sheet" aria-hidden="false">
            <div class="sheet-handle" aria-hidden="true"></div>
            <div class="sheet-body">
              <div class="sheet-top">
                <p class="image-credit" id="image-credit" hidden>
                  Illustration credit:
                  <a id="image-credit-link" target="_blank" rel="noopener noreferrer">Bend</a>
                </p>
              </div>

              <div class="sheet-content">
                <p class="routine-subtitle">Total time: ~12 minutes</p>

                <div class="controls-row start-controls" id="start-controls">
                  <button id="start-btn" class="control-btn emphasized">Start</button>
                </div>

                <div class="controls-row primary-controls" id="run-controls" hidden>
                  <button id="back-btn" class="control-btn">Back</button>
                  <button id="pause-btn" class="control-btn emphasized">Pause</button>
                  <button id="next-btn" class="control-btn">Next</button>
                </div>

                <div class="controls-row done-controls" id="done-controls" hidden>
                  <button id="done-btn" class="control-btn emphasized" hidden>Done</button>
                </div>

                <div class="walk-picker" id="walk-picker" hidden>
                  <p>Choose walk duration</p>
                  <div class="walk-options">
                    <button data-mins="3">3 min</button>
                    <button data-mins="4">4 min</button>
                    <button data-mins="5">5 min</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="history-view" class="view" aria-label="History" hidden>
          <div class="section-card">
            <h2>History (last 7 days)</h2>
            <p id="streak">Streak: 0 days</p>
            <ul id="history-list"></ul>
          </div>
        </section>

        <section id="settings-view" class="view" aria-label="Settings" hidden>
          <div class="section-card">
            <h2>Settings</h2>
            <fieldset class="settings-group">
              <legend>Cues</legend>
              <label><input type="checkbox" id="sound-enabled" checked /> Sound cues</label>
              <label><input type="checkbox" id="haptics-enabled" checked /> Haptic cues</label>
            </fieldset>

            <fieldset class="settings-group">
              <legend>Routine defaults</legend>
              <label>
                Default walk duration
                <select id="default-walk-duration">
                  <option value="3">3 minutes</option>
                  <option value="4">4 minutes</option>
                  <option value="5">5 minutes</option>
                </select>
              </label>
            </fieldset>

            <fieldset class="settings-group">
              <legend>Images</legend>
              <label>
                <input type="checkbox" id="remote-image-caching" /> Cache exercise images for offline use
              </label>
              <p class="setting-note">Keeps images available after first load but uses extra device storage.</p>
            </fieldset>

                <fieldset class="settings-group">
                  <legend>Developer</legend>
                  <label>
                    <input type="checkbox" id="disable-sw" /> Disable service worker (bypass cache)
                  </label>
                  <p class="setting-note">Enable this to unregister the service worker for testing. Requires reload to re-enable.</p>
                </fieldset>

            <fieldset class="settings-group">
              <legend>Theme</legend>
              <label>
                Theme
                <div class="theme-picker">
                  <select id="theme-select">
                    <option value="default">Default</option>
                    <option value="blue">Blue</option>
                    <option value="emerald">Emerald</option>
                    <option value="rose">Rose</option>
                  </select>
                  <span id="theme-swatch" aria-hidden="true" title="Theme preview"></span>
                </div>
              </label>
              <p class="setting-note">Choose a color accent for the app.</p>
            </fieldset>
          </div>
        </section>
      </main>

      <nav class="bottom-nav" aria-label="Primary">
        <button data-view="routine-view" class="nav-btn active"><span class="nav-icon">üßò</span><span>Routine</span></button>
        <button data-view="history-view" class="nav-btn"><span class="nav-icon">üìà</span><span>History</span></button>
        <button data-view="settings-view" class="nav-btn"><span class="nav-icon">‚öôÔ∏è</span><span>Settings</span></button>
      </nav>
      <div id="update-toast" class="toast" hidden aria-live="polite"></div>
    </div>

    <script type="module" src="./src/app.js"></script>
  </body>
</html>
